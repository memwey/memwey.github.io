<!DOCTYPE html>
<html lang='zh' ><meta charset="utf-8">
<meta name="viewport" content="width=device-width">


<title>Oh MySQL Emoji | Mem.Wey&#39;s Github Pages</title>

<meta name="generator" content="Hugo Eureka 0.8.0" />
<link rel="stylesheet" href="https://memwey.github.io/css/eureka.min.css">
<script defer src="https://memwey.github.io/js/eureka.min.js"></script>

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload"
  href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Noto+Serif+SC:wght@400;600;700&display=swap"
  as="style" onload="this.onload=null;this.rel='stylesheet'">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/styles/solarized-light.min.css"
   media="print"
  onload="this.media='all';this.onload=null" crossorigin>
<script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/highlight.min.js"
   crossorigin></script>

  <script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/dart.min.js"
     crossorigin></script>

<script defer src="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/js/all.min.js"
   integrity="sha256-uNYoXefWRqv&#43;PsIF/OflNmwtKM4lStn9yrz2gVl6ymo="  crossorigin></script>




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
   integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3&#43;Aro6EYUG4&#43;cU&#43;KJWu/X"  media="print"
  onload="this.media='all';this.onload=null" crossorigin>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" 
  integrity="sha384-g7c&#43;Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI&#43;sEnkvrMWph2EDg4"  crossorigin></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js"
   integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC&#43;Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa"  crossorigin></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    renderMathInElement(document.body, {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false },
        { left: "\\(", right: "\\)", display: false },
        { left: "\\[", right: "\\]", display: true }
      ],
    });
  });
</script>


<link rel="preconnect" href="https://www.google-analytics.com" crossorigin>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-138801420-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', 'UA-138801420-1');
</script>


<link rel="icon" type="image/png" sizes="32x32" href="https://memwey.github.io/images/icon_hu64421c6c7700f606f0ad45d807017b09_5843_32x32_fill_box_center_2.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://memwey.github.io/images/icon_hu64421c6c7700f606f0ad45d807017b09_5843_180x180_fill_box_center_2.png">

<meta name="description"
  content="åˆæ˜¯å…³äº MySQL çš„, æ ‡é¢˜æ¥è‡ªäº &lt;è½®åˆ°ä½ äº†">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
      "@type": "ListItem",
      "position": 1 ,
      "name":"Posts",
      "item":"https://memwey.github.io/posts/"},{
      "@type": "ListItem",
      "position": 2 ,
      "name":"Oh MySQL Emoji",
      "item":"https://memwey.github.io/posts/code/oh-mysql-emoji/"}]
}
</script>



<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://memwey.github.io/posts/code/oh-mysql-emoji/"
    },
    "headline": "Oh MySQL Emoji | Mem.Wey\u0027s Github Pages","datePublished": "2019-10-14T11:12:33+08:00",
    "dateModified": "2019-10-14T11:12:33+08:00",
    "wordCount":  1931 ,
    "author": {
        "@type": "Person",
        "name": ["memwey"]
    },
    "publisher": {
        "@type": "Person",
        "name": "Mem Wey",
        "logo": {
            "@type": "ImageObject",
            "url": "https://memwey.github.io/images/icon.png"
        }
        },
    "description": "åˆæ˜¯å…³äº MySQL çš„, æ ‡é¢˜æ¥è‡ªäº \u0026lt;è½®åˆ°ä½ äº†"
}
</script><meta property="og:title" content="Oh MySQL Emoji | Mem.Wey&#39;s Github Pages" />
<meta property="og:type" content="article" />


<meta property="og:image" content="https://memwey.github.io/images/icon.png">


<meta property="og:url" content="https://memwey.github.io/posts/code/oh-mysql-emoji/" />




<meta property="og:description" content="åˆæ˜¯å…³äº MySQL çš„, æ ‡é¢˜æ¥è‡ªäº &lt;è½®åˆ°ä½ äº†" />




<meta property="og:locale" content="zh" />




<meta property="og:site_name" content="Mem.Wey&#39;s Github Pages" />






<meta property="article:published_time" content="2019-10-14T11:12:33&#43;08:00" />


<meta property="article:modified_time" content="2019-10-14T11:12:33&#43;08:00" />



<meta property="article:section" content="posts" />


<meta property="article:tag" content="Database" />





<meta property="og:see_also" content="https://memwey.github.io/posts/code/oh-mysql-in-subquery/" />



<body class="flex flex-col min-h-screen">
  <header class="fixed flex items-center w-full min-h-16 pl-scrollbar z-50 bg-secondary-bg shadow-sm">
    <div class="w-full max-w-screen-xl mx-auto"><script>
    let storageColorScheme = localStorage.getItem("lightDarkMode")
    if (((storageColorScheme == 'Auto' || storageColorScheme == null) && window.matchMedia("(prefers-color-scheme: dark)").matches) || storageColorScheme == "Dark") {
        document.getElementsByTagName('html')[0].classList.add('dark')
    }
</script>
<nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0">
    <a href="/" class="mr-6 text-primary-text text-xl font-bold">Mem.Wey&#39;s Github Pages</a>
    <button id="navbar-btn" class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
        <i class="fas fa-bars"></i>
    </button>

    <div id="target"
        class="hidden block md:flex md:flex-grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20">
        <div class="md:flex md:h-16 text-sm md:flex-grow pb-4 md:pb-0 border-b md:border-b-0">
            <a href="/posts/" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  selected-menu-item  mr-4">Posts</a>
            <a href="/tags/" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  mr-4">Tags</a>
            <a href="/friends/" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  mr-4">Friends</a>
            <a href="/authors/memwey" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  mr-4">About</a>
        </div>

        <div class="flex">
            <div class="relative pt-4 md:pt-0">
                <div class="cursor-pointer hover:text-eureka" id="lightDarkMode">
                    <i class="fas fa-adjust"></i>
                </div>
                <div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id="is-open">
                </div>
                <div class="absolute flex flex-col left-0 md:left-auto right-auto md:right-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40"
                    id='lightDarkOptions'>
                    <span class="px-4 py-1 hover:text-eureka" name="Light">æµ…è‰²</span>
                    <span class="px-4 py-1 hover:text-eureka" name="Dark">æ·±è‰²</span>
                    <span class="px-4 py-1 hover:text-eureka" name="Auto">è‡ªåŠ¨</span>
                </div>
            </div>
        </div>
    </div>

    <div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id="is-open-mobile">
    </div>

</nav>
<script>
    
    let element = document.getElementById('lightDarkMode')
    if (storageColorScheme == null || storageColorScheme == 'Auto') {
        document.addEventListener('DOMContentLoaded', () => {
            window.matchMedia("(prefers-color-scheme: dark)").addEventListener('change', switchDarkMode)
        })
    } else if (storageColorScheme == "Light") {
        element.firstElementChild.classList.remove('fa-adjust')
        element.firstElementChild.setAttribute("data-icon", 'sun')
        element.firstElementChild.classList.add('fa-sun')
    } else if (storageColorScheme == "Dark") {
        element.firstElementChild.classList.remove('fa-adjust')
        element.firstElementChild.setAttribute("data-icon", 'moon')
        element.firstElementChild.classList.add('fa-moon')
    }

    document.addEventListener('DOMContentLoaded', () => {
        getcolorscheme();
        switchBurger();
    });
</script>
</div>
  </header>
  <main class="flex-grow pt-16">
    <div class="pl-scrollbar">
      <div class="w-full max-w-screen-xl lg:px-4 xl:px-8 mx-auto">


<div class="grid grid-cols-2 lg:grid-cols-8 gap-4 lg:pt-12">
    <div
        class="col-span-2  lg:col-span-6 bg-secondary-bg rounded px-6 py-8">
        <h1 class="font-bold text-3xl text-primary-text">Oh MySQL Emoji</h1>
        <div class="flex flex-wrap flex-row items-center mt-2 text-tertiary-text">
    <div class="mr-6 my-2">
        <i class="fas fa-calendar mr-1"></i>
        <span>2019-10-14</span>
    </div>
    <div class="mr-6 my-2">
        <i class="fas fa-clock mr-1"></i>
        <span>4åˆ†é’Ÿé˜…è¯»æ—¶é•¿</span>
    </div>
    
    

    
</div>
        
        
        

        <div class="content">
            <p>åˆæ˜¯å…³äº <code>MySQL</code> çš„, æ ‡é¢˜æ¥è‡ªäº &lt;è½®åˆ°ä½ äº†&gt; è¿™éƒ¨<del>çƒ‚å°¾</del>æ—¥å‰§, é‡Œé¢éå¸¸é­”æ€§çš„ Oh~my~Ju~lia~</p>
<p>åœ¨MySQLé‡Œé¢å¦‚ä½•ä¿å­˜ <a href="https://en.wikipedia.org/wiki/Emoji">Emoji</a>, è¿™ä¸ªé—®é¢˜æœä¸€æœå¾ˆå®¹æ˜“æ‰¾åˆ°ç­”æ¡ˆ, è®¾ç½® <strong>CHARSET</strong> ä¸º <code>utf8mb4</code>, çœ‹æ¥å¤©ä¸‹è‹¦ <code>MySQL</code> ä¹…çŸ£.</p>
<h2 id="åŸºç¡€çŸ¥è¯†">åŸºç¡€çŸ¥è¯†</h2>
<p>è®¡ç®—æœºæœ€æ—©æ˜¯ç¾å›½äººå‘æ˜çš„, é‚£æ—¶çš„ç¼–ç éƒ½æ˜¯ <code>ASCII</code> ç , æ¯•ç«Ÿè‹±æ–‡å­—ç¬¦åŠ ä¸Šæ ‡ç‚¹ç¬¦å·ä¹Ÿå°±é‚£ä¹ˆå¤šå˜›, ä¸€ä¸ªå­—èŠ‚ç»°ç»°æœ‰ä½™.</p>
<p>ä½†æ˜¯éšç€è®¡ç®—æœºçš„å‘å±•, è®¡ç®—æœºé¢å‘çš„å›½å®¶å’Œè¯­è¨€è¶Šæ¥è¶Šå¤š, ä¸€ä¸ªå­—èŠ‚æ ¹æœ¬ä¸å¤Ÿç”¨äº†, äºæ˜¯å°±æœ‰äº†å¾ˆå¤šé¢å‘ç‰¹å®šè¯­è¨€çš„ç¼–ç , æ¯”å¦‚æ±‰å­—çš„<code>GBK</code>, <code>Big5</code>, éŸ©æ–‡çš„ <code>EUC-KR</code>, æ—¥æ–‡çš„ <code>Shift_JIS</code> ä»€ä¹ˆçš„. æ€»ä½“æ€æƒ³æ˜¯, æ—¢ç„¶ä¸€ä¸ªå­—èŠ‚ä¸å¤Ÿç”¨, é‚£å°±å¤šå‡ ä¸ªå­—èŠ‚å°±æ˜¯äº†å˜›.</p>
<p>ä½†æ˜¯é—®é¢˜åˆå‡ºç°äº†, åŒä¸€ä¸ªç¼–ç åœ¨ä¸åŒè¯­è¨€ä¸­ä¼šæœ‰ä¸åŒçš„å«ä¹‰,æ¯”å¦‚éŸ©æ–‡ç¼–ç  <code>EUC-KR</code> ä¸­ <code>í•œêµ­ì–´</code> çš„ç¼–ç å€¼æ­£å¥½å¯¹åº”ç€æ±‰å­—ç¼–ç  <code>GBK</code> ä¸­çš„ <code>èŒ„æƒ«ç»¢</code>. è¿˜æœ‰é‚£ä¸ªè‘—åçš„ <code>ç“£Bå˜å·¨è‚š</code>, ä¹Ÿæ­£æ˜¯åŒæ ·çš„åŸå› . è¿™æ ·ä»¿ä½›å°±å˜æˆäº†å·´åˆ«å¡”çš„æ•…äº‹. äººä»¬è™½ç„¶ç”¨ç€åŒæ ·çš„äºŒè¿›åˆ¶ç¼–ç , ä½†æ˜¯å´è¡¨è¾¾ç€ä¸åŒçš„æ„æ€; å°±åƒäººä»¬è™½ç„¶åŒæ ·å‘å‡ºå£°å¸¦çš„éœ‡åŠ¨, ä½†æ˜¯å´æ— æ³•äº’ç›¸ç†è§£å¯¹æ–¹çš„è¯è¯­.</p>
<p><a href="https://en.wikipedia.org/wiki/International_Organization_for_Standardization">å›½é™…æ ‡å‡†åŒ–ç»„ç»‡</a> å’Œ <a href="https://en.wikipedia.org/wiki/Unicode_Consortium">ç»Ÿä¸€ç è”ç›Ÿ</a> æ„è¯†åˆ°, è¿™æ ·ä¸‹å»æ˜¯ä¸è¡Œçš„, ä¸å¦‚æä¸€ä¸ªè¶…å¤§çš„å­—ç¬¦é›†, ç„¶åæŠŠäººç±»æ‰€æœ‰å­—ç¬¦éƒ½å¼„è¿›å», è¿™æ ·äººç±»éƒ½å¯ä»¥ç”¨åŒä¸€ä¸ªæ ‡å‡†äº†. äºæ˜¯, ä»–ä»¬åˆ†åˆ«åˆ¶å®šäº† <a href="https://en.wikipedia.org/wiki/Universal_Coded_Character_Set">USC</a> å’Œ <a href="https://en.wikipedia.org/wiki/Unicode">Unicode</a>. å½“ç„¶, å¦‚æœä¸¤ä¸ªæ ‡å‡†å„æå„çš„, é‚£å°±å’Œä»–ä»¬æœ€åˆçš„æƒ³æ³•èƒŒé“è€Œé©°äº†, æ‰€ä»¥ç›®å‰è¿™ä¸¤ä¸ªå­—ç¬¦é›†åœ¨å®é™…ä½¿ç”¨ä¸­æ˜¯ä¸€è‡´çš„. ä¸€èˆ¬è¿˜æ˜¯æŠŠè¿™ä¸ªå­—ç¬¦é›†å« <code>Unicode</code>.</p>
<p><code>Unicode</code> çš„èŒƒå›´ä¸Šé™æ˜¯ <code>0x10FFFF</code>, æ¢ç®—æˆåè¿›åˆ¶å°±æ˜¯ <code>1,114,111</code> è¿™ä¹ˆå¤š. æ‰€ä»¥å¦‚æœä»¥åå¤–æ˜Ÿäººçš„æ–‡å­—å¤ªå¤š, è¯´ä¸å®šè¿™ä¸ªèŒƒå›´å°±ä¸å¤Ÿäº†.</p>
<p>å…¶å®è¿™é‡Œæ‚„æ‚„çš„å·æ¢äº†ä¸€ä¸ªæ¦‚å¿µ, ä¹‹å‰åœ¨è¯´ç¼–ç , ç°åœ¨å˜æˆäº†å­—ç¬¦é›†äº†. åœ¨å¾ˆå¤šä¹‹å‰æåˆ°çš„ç¼–ç ä¸­, è¿™äº›ç¼–ç æ—¢æ˜¯å­—ç¬¦é›†, åˆæ˜¯ç›´æ¥çš„ç¼–ç . è€Œåœ¨ <code>Unicode</code> ä¸­, å­—ç¬¦é›†å®é™…ä¸Šæ˜¯ä¸ç¼–ç åˆ†å¼€çš„ä¸¤ä¸ªæ¦‚å¿µ, è€Œå¯¹åº”çš„ç¼–ç , å®é™…ä¸Šå°±æ˜¯æˆ‘ä»¬ç»å¸¸è§åˆ°çš„ <code>UTF</code>. å…¶ä¸­ <code>UTF-8</code> æ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„ä¸€ç§ç¼–ç äº†.</p>
<p><code>UTF-8</code> æœ€å¤§çš„ç‰¹ç‚¹, å°±æ˜¯å®ƒæ˜¯ä¸€ç§å˜é•¿çš„ç¼–ç æ–¹å¼, è€Œä¸”å®Œå…¨å…¼å®¹ <code>ASCII</code>ç .</p>
<p><code>UTF-8</code> çš„ç¼–ç è§„åˆ™ä¹Ÿå¾ˆç®€å•ï¼Œåªæœ‰äºŒæ¡:</p>
<ul>
<li>
<p>å¯¹äºå•å­—èŠ‚çš„ç¬¦å·, å­—èŠ‚çš„ç¬¬ä¸€ä½è®¾ä¸º<code>0</code>, åé¢7ä½ä¸ºè¿™ä¸ªç¬¦å·çš„ Unicode ç . å¯¹äº <code>0 - 127</code> ä½çš„å­—ç¬¦ï¼ŒUTF-8 ç¼–ç å’Œ ASCII ç æ˜¯å®Œå…¨ç›¸åŒçš„.</p>
</li>
<li>
<p>å¯¹äº <code>n</code> å­—èŠ‚çš„ç¬¦å· <code>(n &gt; 1)</code> , ç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰ <code>n</code> ä½éƒ½è®¾ä¸º <code>1</code>, ç¬¬ <code>n + 1</code> ä½è®¾ä¸º <code>0</code>, åé¢å­—èŠ‚çš„å‰ä¸¤ä½ä¸€å¾‹è®¾ä¸º <code>10</code>. å‰©ä¸‹çš„æ²¡æœ‰æåŠçš„äºŒè¿›åˆ¶ä½, å…¨éƒ¨ä¸ºè¿™ä¸ªç¬¦å·çš„ Unicode ç .</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Unicodeç¬¦å·èŒƒå›´</th>
<th>UTF-8ç¼–ç æ–¹å¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>U+0000 - U+007F</td>
<td>0xxxxxxx</td>
</tr>
<tr>
<td>U+0080 - U+07FF</td>
<td>110xxxxx 10xxxxxx</td>
</tr>
<tr>
<td>U+0800 - U+FFFF</td>
<td>1110xxxx 10xxxxxx 10xxxxxx</td>
</tr>
<tr>
<td>U+010000 - U+10FFFF</td>
<td>11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</td>
</tr>
</tbody>
</table>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬å‘ç°, <code>U+0000 - U+FFFF</code> è¿™ä¸ª<strong>å¹³é¢</strong>(Plane), å³<strong>åŸºæœ¬å¤šæ–‡ç§å¹³é¢</strong>, ç®€ç§° <code>BMP</code>, ç”¨ <code>UTF-8</code> è¿›è¡Œç¼–ç , åªéœ€è¦ä¸‰ä¸ªå­—èŠ‚.</p>
<h2 id="è½®åˆ°ä½ äº†">è½®åˆ°ä½ äº†</h2>
<p>åœ¨ <code>MySQL</code> çš„ <strong>CHARSET</strong> ä¸­, <code>utf8</code> æ”¯æŒå­˜å‚¨ 1 - 3å­—èŠ‚çš„å­—ç¬¦, å³å¯¹åº” <code>Unicode</code> ä¸­ <code>BMP</code> çš„éƒ¨åˆ†, è€Œ <a href="https://en.wikipedia.org/wiki/Emoji">Emoji</a>, åˆ™å¤§å¤šæ•°åœ¨ <code>BMP</code> ä¹‹å¤–. æ‰€ä»¥ <code>MySQL</code> ä¸­çš„ <code>utf8</code> æ˜¯å‡çš„, æ˜¯åŒ–å­¦çš„æˆåˆ†, æ˜¯åŠ äº†ç‰¹æŠ€çš„. å¦‚æœæƒ³å‚¨å­˜çœŸæ­£çš„ <code>UTF-8</code> çš„å†…å®¹, å°±ä¸€å®šè¦ä½¿ç”¨ <code>utf8mb4</code>.</p>
<p>å½“ç„¶, å¹¶ä¸æ˜¯æ‰€æœ‰çš„ <a href="https://en.wikipedia.org/wiki/Emoji">Emoji</a> éƒ½åœ¨ <code>BMP</code> ä¹‹å¤–, æ¯”å¦‚ â˜º è¿™ä¸ªè¡¨æƒ…, å®ƒçš„ç¼–ç æ˜¯ <code>U+263A</code>, è¿˜æœ‰ â˜¹ï¸ , ç¼–ç æ˜¯ <code>U+2639</code>.</p>
<p>å½“ç„¶, ä¹Ÿä¸æ˜¯æ‰€æœ‰çš„æ±‰å­—éƒ½è¢«åŒ…å«åœ¨äº† <code>BMP</code> é‡Œé¢äº†, åœ¨ <a href="https://www.compart.com/en/unicode/block">è¿™é‡Œ</a> å¯ä»¥çœ‹åˆ°å­—ç¬¦æ˜¯æŒ‰ç…§ä¸€å®šçš„è§„å¾‹åˆ’åˆ†ä¸º <code>Block</code> æ”¾è¿›æ¥çš„, åœ¨<strong>è¡¨æ„æ–‡å­—è¡¥å……å¹³é¢</strong>ä¹Ÿå°±æ˜¯ <code>U+20000 - U+2FFFF</code> è¿™ä¸ª<strong>å¹³é¢</strong>(Plane), è¿˜æ˜¯æœ‰å¾ˆå¤š <code>CJK</code> å‘½åçš„ <code>Block</code> çš„.</p>
<h2 id="å†æ¥ä¸€ç“¶">å†æ¥ä¸€ç“¶</h2>
<p>ä½ ä»¥ä¸ºå‘åˆ°è¿™é‡Œå°±ç»“æŸäº†å—</p>
<pre><code class="language-SQL">CREATE TABLE `emoji_test` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `emoji` VARCHAR(1024) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
</code></pre>
<pre><code class="language-SQL">SET NAMES utf8mb4;
</code></pre>
<pre><code class="language-bash">MySQL [test]&gt; SELECT * FROM emoji_test;
+----+-------+
| id | emoji |
+----+-------+
|  8 | ğŸ˜ƒ      |
|  9 | ğŸ˜‚      |
| 10 | ğŸ¤¦      |
+----+-------+
3 rows in set (0.001 sec)

MySQL [test]&gt; SELECT * FROM emoji_test WHERE emoji = 'ğŸ˜‚';
+----+-------+
| id | emoji |
+----+-------+
|  8 | ğŸ˜ƒ      |
|  9 | ğŸ˜‚      |
| 10 | ğŸ¤¦      |
+----+-------+
3 rows in set (0.001 sec)
</code></pre>
<p>æ˜¯ä¸æ˜¯å¾ˆç¥å¥‡å‘¢, çœ‹ä¸‹è¡¨çš„ä¿¡æ¯å‘¢</p>
<pre><code class="language-SQL">MySQL [test]&gt; SHOW TABLE STATUS WHERE Name = 'emoji_test';
+------------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+--------------------+----------+----------------+---------+
| Name       | Engine | Version | Row_format | Rows | Avg_row_length | Data_length | Max_data_length | Index_length | Data_free | Auto_increment | Create_time         | Update_time         | Check_time | Collation          | Checksum | Create_options | Comment |
+------------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+--------------------+----------+----------------+---------+
| emoji_test | InnoDB |      10 | Dynamic    |    3 |           5461 |       16384 |               0 |            0 |         0 |             11 | 2019-10-16 11:16:28 | 2019-10-16 11:25:10 | NULL       | utf8mb4_general_ci |     NULL |                |         |
+------------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+--------------------+----------+----------------+---------+
1 row in set (0.001 sec)
</code></pre>
<p>å¯ä»¥çœ‹åˆ°æ­¤æ—¶é»˜è®¤çš„å­—ç¬¦åºæ˜¯ <code>utf8mb4_general_ci</code>, ä½¿ç”¨ <code>WEIGHT_STRING</code> æ¥æŸ¥è¯¢è¿™äº› Emoji çš„å­—ç¬¦åº</p>
<pre><code class="language-SQL">MySQL [test]&gt; SET @s = 'ğŸ˜‚' COLLATE utf8mb4_general_ci;
Query OK, 0 rows affected (0.003 sec)

MySQL [test]&gt; SELECT @s, HEX(@s), HEX(WEIGHT_STRING(@s));
+------+----------+------------------------+
| @s   | HEX(@s)  | HEX(WEIGHT_STRING(@s)) |
+------+----------+------------------------+
| ğŸ˜‚     | F09F9882 | FFFD                   |
+------+----------+------------------------+
1 row in set (0.001 sec)

MySQL [test]&gt; SET @s = 'ğŸ˜ƒ' COLLATE utf8mb4_general_ci;
Query OK, 0 rows affected (0.001 sec)

MySQL [test]&gt; SELECT @s, HEX(@s), HEX(WEIGHT_STRING(@s));
+------+----------+------------------------+
| @s   | HEX(@s)  | HEX(WEIGHT_STRING(@s)) |
+------+----------+------------------------+
| ğŸ˜ƒ     | F09F9883 | FFFD                   |
+------+----------+------------------------+
1 row in set (0.001 sec)
</code></pre>
<p>å¯ä»¥çœ‹åˆ°, å®ƒä»¬çš„ç¼–ç è™½ç„¶ä¸åŒ, ä½†æ˜¯å­—ç¬¦åºçš„å€¼æ˜¯ç›¸åŒçš„, éƒ½æ˜¯ <code>0xFFFD</code>, æ‰€ä»¥åœ¨åŒ¹é…çš„æ—¶å€™, å®ƒä»¬è¢«è®¤ä¸ºæ˜¯åŒä¸€ä¸ªå­—ç¬¦, è¿™åˆæ˜¯ <code>MySQL</code> çš„ä¸€ä¸ªå¤§å‘</p>
<p>è¦æ˜¯æƒ³ç²—æš´ç‚¹è§£å†³é—®é¢˜çš„è¯, ç›´æ¥ä½¿ç”¨ <code>utf8mb4_bin</code> ä½œä¸ºå­—ç¬¦åºå°±å¥½äº†</p>
<h2 id="åˆæ¥ä¸€ç“¶">åˆæ¥ä¸€ç“¶</h2>
<p>ä½†æ˜¯è¿™è¿˜ä¸æ˜¯ç»“æŸ, å½“ä¸šåŠ¡ä»£ç è¿æ¥æ•°æ®åº“å¹¶æ’å…¥ä¸€äº› Emoji æ—¶, è¿˜æ˜¯å¯èƒ½é‡åˆ°å¦‚ä¸‹é”™è¯¯</p>
<pre><code>ERROR 1366: Incorrect string value: '\xF0\x9D\x8C\x86' for column 'column_name' at row 1
</code></pre>
<p>è¿™ä¸ªæ˜¯å› ä¸ºå®¢æˆ·ç«¯åˆ° MySQL æœåŠ¡å™¨çš„è¿æ¥è¿˜æ˜¯ utf8 è€Œé utf8mb4, æ‰€ä»¥ä½ éœ€è¦åœ¨ä¸šåŠ¡é€»è¾‘ä¸­åšç±»ä¼¼å¦‚ä¸‹è¯­å¥çš„äº‹æƒ…</p>
<pre><code>SET NAMES utf8mb4
</code></pre>
<p>æˆ–è€…ä¿®æ”¹ MySQL çš„é…ç½®æ–‡ä»¶, å½“ç„¶è¿™æ ·ä¸å¤ªç°å®, éœ€è¦é‡å¯ MySQL è¿›ç¨‹.</p>
<p>è¿™æ ·ä½ æ‰èƒ½ç»ˆäºç”¨ä¸Š Emoji</p>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<ol>
<li><a href="https://stackoverflow.com/questions/41147829/how-can-i-search-by-emoji-in-mysql-using-utf8mb4">How can I search by emoji in MySQL using utf8mb4?</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html">å­—ç¬¦ç¼–ç ç¬”è®°ï¼šASCIIï¼ŒUnicode å’Œ UTF-8
</a></li>
<li><a href="https://www.zhihu.com/question/60072951">å¦‚ä½•é€šä¿—åœ°ç†è§£Unicodeã€UTF-8ã€ASCIIã€GBKç­‰å­—ç¬¦ç¼–ç ï¼Ÿ</a></li>
<li><a href="https://medium.com/@adamhooper/in-mysql-never-use-utf8-use-utf8mb4-11761243e434">In MySQL, never use â€œutf8â€. Use â€œutf8mb4â€.</a></li>
<li><a href="https://mathiasbynens.be/notes/mysql-utf8mb4">How to support full Unicode in MySQL databases</a></li>
<li><a href="https://dev.mysql.com/doc/refman/5.7/en/charset-connection.html">Connection Character Sets and Collations</a></li>
<li><a href="https://stackoverflow.com/questions/10957238/incorrect-string-value-when-trying-to-insert-utf-8-into-mysql-via-jdbc">â€œIncorrect string valueâ€ when trying to insert UTF-8 into MySQL via JDBC?</a></li>
</ol>
<h2 id="æ‰©å±•é˜…è¯»">æ‰©å±•é˜…è¯»</h2>
<ol>
<li><a href="https://zhuanlan.zhihu.com/p/53714077">å…¶å®ä½ å¹¶ä¸æ‡‚ Unicode</a></li>
<li><a href="https://eev.ee/blog/2015/09/12/dark-corners-of-unicode/">Dark corners of Unicode</a></li>
<li><a href="http://mysql.taobao.org/monthly/2017/03/06/">MySQL Â· å®ç°åˆ†æ Â· å¯¹å­—ç¬¦é›†å’Œå­—ç¬¦åºæ”¯æŒçš„å®ç°</a></li>
<li><a href="https://docs.python.org/3.7/library/unicodedata.html">unicodedata â€” Unicode Database</a></li>
</ol>

        </div>
        
        <div class="my-4">
    
    <a href="https://memwey.github.io/tags/database/" class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 mr-2 hover:text-eureka">#Database</a>
    
</div>
        
        
        


        
        
        <div class="py-2">
    
    <div class="flex flex-col md:flex-row items-center my-8">
        <a href="https://memwey.github.io/authors/memwey/" class="w-24 h-24 md:mr-4">
            
            
            <img src="https://memwey.github.io/images/me/avatar.jpeg" class="w-full bg-primary-bg rounded-full" alt="Avatar">
            
        </a>
        <div class="w-full md:w-auto mt-4 md:mt-0">
            <a href="https://memwey.github.io/authors/memwey/" class="block font-bold text-lg pb-1 mb-2 border-b">Mem Wey</a>
            <span class="block pb-2">This may the last time we can meet.</span>
            
            
            
            
            
            <a href="https://github.com/memwey" class="mr-1">
                <i class="fab fa-github"></i>
            </a>
            
            
            
            
            
            <a href="https://twitter.com/Mem_Wey" class="mr-1">
                <i class="fab fa-twitter"></i>
            </a>
            
            
            
            
            
            <a href="https://www.linkedin.com/in/memwey" class="mr-1">
                <i class="fab fa-linkedin"></i>
            </a>
            
            
            
            
            
            <a href="https://steamcommunity.com/id/memwey/" class="mr-1">
                <i class="fab fa-steam"></i>
            </a>
            
        </div>
    </div>
    
</div>
        
        
        
<div class="flex flex-col md:flex-row md:justify-between -mx-2 mt-4 px-2 pt-4 border-t">
    <div>
        
        <span class="block font-bold">ä¸Šä¸€é¡µ</span>
        <a href="https://memwey.github.io/posts/misc/dell-t1700-sff/" class="block">DELL Precision T1700 SFF</a>
        
    </div>
    <div class="md:text-right mt-4 md:mt-0">
        
        <span class="block font-bold">ä¸‹ä¸€é¡µ</span>
        <a href="https://memwey.github.io/posts/code/oh-mysql-in-subquery/" class="block">Oh MySQL IN Subquery</a>
        
    </div>
</div>

        



  
<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "memwey" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
    
    <div class="col-span-2">
        
        
        <div class="sticky top-16 z-10 hidden lg:block px-6 py-4  bg-primary-bg ">
    <span class="text-lg font-semibold">æœ¬é¡µå†…å®¹</span>
</div>
<div class="sticky-toc hidden lg:block px-6 pb-6 ">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#åŸºç¡€çŸ¥è¯†">åŸºç¡€çŸ¥è¯†</a></li>
    <li><a href="#è½®åˆ°ä½ äº†">è½®åˆ°ä½ äº†</a></li>
    <li><a href="#å†æ¥ä¸€ç“¶">å†æ¥ä¸€ç“¶</a></li>
    <li><a href="#åˆæ¥ä¸€ç“¶">åˆæ¥ä¸€ç“¶</a></li>
    <li><a href="#å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</a></li>
    <li><a href="#æ‰©å±•é˜…è¯»">æ‰©å±•é˜…è¯»</a></li>
  </ul>
</nav>
</div>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        enableStickyToc();
    });
</script>
        
    </div>
    

    
    
    <div
        class="col-span-2  lg:col-span-6 bg-secondary-bg rounded p-6">
        <h2 class="text-lg font-semibold mb-4">ç›¸å…³</h2>
        <div class="content">
            
            <a href="https://memwey.github.io/posts/code/oh-mysql-in-subquery/">Oh MySQL IN Subquery</a>
            <br />
            
        </div>
    </div>
    
</div>
<script>
    document.addEventListener('DOMContentLoaded', ()=>{
        hljs.initHighlightingOnLoad();
    })
</script>

      </div>
    </div>
    
  </main>
  <footer class="pl-scrollbar">
    <div class="w-full max-w-screen-xl mx-auto"><div class="text-center p-6 pin-b">
    <p class="text-sm text-tertiary-text">&copy; 2021 <a href="https://memwey.github.io/">Mem.Wey</a>
 &middot;  Powered by the <a href="https://github.com/wangchucheng/hugo-eureka" class="hover:text-eureka">Eureka</a> theme for <a href="https://gohugo.io" class="hover:text-eureka">Hugo</a></p>
</div></div>
  </footer>
</body>

</html>